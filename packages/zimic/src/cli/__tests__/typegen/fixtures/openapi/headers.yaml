openapi: 3.1.0

info:
  title: Headers
  version: 1.0.0

paths:
  /users-with-literal-component-headers:
    get:
      summary: List of users with component headers
      parameters:
        - name: content-type
          in: header
          schema:
            $ref: '#/components/headers/literal-content-type'
        - name: x-rate-limit-remaining
          in: header
          schema:
            $ref: '#/components/headers/literal-x-rate-limit-remaining'
        - name: x-rate-limit-reached
          in: header
          schema:
            $ref: '#/components/headers/literal-x-rate-limit-reached'
      responses:
        200:
          headers:
            content-type:
              $ref: '#/components/headers/literal-content-type'
            x-rate-limit-remaining:
              $ref: '#/components/headers/literal-x-rate-limit-remaining'
            x-rate-limit-reached:
              $ref: '#/components/headers/literal-x-rate-limit-reached'
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'

  /users-with-reference-component-headers:
    get:
      summary: List of users with component headers
      parameters:
        - name: content-type
          in: header
          schema:
            $ref: '#/components/headers/reference-content-type'
        - name: x-rate-limit-remaining
          in: header
          schema:
            $ref: '#/components/headers/reference-x-rate-limit-remaining'
        - name: x-rate-limit-reached
          in: header
          schema:
            $ref: '#/components/headers/reference-x-rate-limit-reached'
      responses:
        200:
          headers:
            content-type:
              $ref: '#/components/headers/reference-content-type'
            x-rate-limit-remaining:
              $ref: '#/components/headers/reference-x-rate-limit-remaining'
            x-rate-limit-reached:
              $ref: '#/components/headers/reference-x-rate-limit-reached'
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'

  /users-with-literal-headers:
    get:
      summary: List of users with literal headers
      parameters:
        - name: content-type
          in: header
          schema:
            type: string
            nullable: true
        - name: x-rate-limit-remaining
          in: header
          schema:
            type: integer
        - name: x-rate-limit-reached
          in: header
          schema:
            type: boolean
      responses:
        200:
          description: Success
          headers:
            content-type:
              schema:
                type: string
                nullable: true
            x-rate-limit-remaining:
              schema:
                type: integer
            x-rate-limit-reached:
              schema:
                type: boolean
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'

  /users-with-reference-headers:
    get:
      summary: List of users with reference headers
      parameters:
        - name: content-type
          in: header
          schema:
            $ref: '#/components/schemas/content-type'
        - name: x-rate-limit-remaining
          in: header
          schema:
            $ref: '#/components/schemas/x-rate-limit-remaining'
        - name: x-rate-limit-reached
          in: header
          schema:
            $ref: '#/components/schemas/x-rate-limit-reached'
      responses:
        200:
          description: Success
          headers:
            content-type:
              schema:
                type: string
                nullable: true
            x-rate-limit-remaining:
              schema:
                type: integer
            x-rate-limit-reached:
              schema:
                type: boolean
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'

components:
  schemas:
    User:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string

    content-type:
      type: string
    x-rate-limit-remaining:
      type: integer
    x-rate-limit-reached:
      type: boolean

  headers:
    literal-content-type:
      schema:
        type: string
        nullable: true
    literal-x-rate-limit-remaining:
      schema:
        type: integer
    literal-x-rate-limit-reached:
      schema:
        type: boolean

    reference-content-type:
      schema:
        $ref: '#/components/schemas/content-type'
    reference-x-rate-limit-remaining:
      schema:
        $ref: '#/components/schemas/x-rate-limit-remaining'
    reference-x-rate-limit-reached:
      schema:
        $ref: '#/components/schemas/x-rate-limit-reached'
